generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["jsonProtocol"]
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Holder {
  owner  String @id
  amount Int
  mints  Dino[]
}

model Dino {
  mint        String      @id
  name        String
  pfp         String
  gif         String
  holderOwner String?
  rarity      Int?
  attributes  Attributes?
  herd        Herd[]
  holder      Holder?     @relation(fields: [holderOwner], references: [owner])

  @@index([holderOwner])
}

model Attributes {
  mint       String @id
  species    String
  skin       String
  color      String
  motion     String
  mood       String
  background String
  layerCount String
  back       String
  belly      String
  pattern    String
  details    String
  dino       Dino   @relation(fields: [mint], references: [mint])

  @@index([mint])
}

model Herd {
  id      String @id @default(uuid())
  owner   String
  tier    Int
  type    String
  matches String
  rarity  Int
  herd    Dino[]
}

model DinoToHerd {
  A String
  B String

  @@unique([A, B], map: "_DinoToHerd_AB_unique")
  @@index([B], map: "_DinoToHerd_B_index")
  @@map("_DinoToHerd")
}
